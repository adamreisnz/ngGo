<!DOCTYPE html>
<html>
<head>
  <title>ngGo demo - GIB conversion</title>
  <meta charset="utf-8">
  <meta name="author" content="Adam Reis">
  <link rel="stylesheet" type="text/css" media="screen" href="../release/ngGo.min.css">
  <link rel="stylesheet" type="text/css" media="screen" href="assets/demo.css">
  <script src="../node_modules/angular/angular.js"></script>
  <script src="../release/ngGo.js"></script>
</head>
<body lang="en">
<main ng-controller="ngGoDemoController">
  <section class="goban">
    <player mode="replay">
      <board coordinates="true"></board>
    </player>
  </section>
  <aside class="goban-info">
    <h3>{{Game.getName()}}</h3>
    <p>
      <span ng-repeat="Player in Game.get('game.players')">{{Player.name}} ({{Player.rank}})<span ng-show="$first"> vs. </span></span><br>
      {{Game.getTurn() | stoneColor}} to play<br>
      Move number: {{Game.getMove()}}<br>
      Komi: {{Game.getKomi()}}<br>
      Result: {{Game.getResult()}}
    </p>

    <p>
      Player mode:<br>
      <button ng-repeat="(mode, modeClass) in Player.modes" ng-click="Player.switchMode(mode)" ng-disabled="Player.mode == mode">{{mode}}</button>
    </p>

    <p>
      Player tool:<br>
      <button ng-repeat="tool in Player.tools" ng-click="Player.switchTool(tool)" ng-disabled="Player.tool == tool">{{tool}}</button>
    </p>

    <p ng-show="Player.tool == 'setup'">
      Setup tool:<br>
      <button ng-repeat="tool in SetupTools" ng-click="Player.switchSetupTool(tool)" ng-disabled="Player.setupTool == tool">{{tool}}</button>
    </p>

    <p ng-show="Player.tool == 'markup'">
      Markup tool:<br>
      <button ng-repeat="tool in MarkupTools" ng-click="Player.switchMarkupTool(tool)" ng-disabled="Player.markupTool == tool">{{tool}}</button>
    </p>

    <p>
      Options:<br>
      <button ng-click="Player.board.swapColors()">Swap colors</button>
      <button ng-click="Player.board.toggleCoordinates()">Toggle coordinates</button>
      <button ng-click="Player.setVariationMarkup(!Player.variationMarkup)">Toggle variation markup</button>
    </p>

    <p>
      Navigate &amp; auto play:<br>
      <button ng-click="Player.first()">&lt;&lt;</button>
      <button ng-click="Player.previous()">&lt;</button>
      <button ng-click="Player.next()">&gt;</button>
      <button ng-click="Player.last()">&gt;&gt;</button>
      <br>
      <button ng-click="Player.start()">Start</button>
      <button ng-click="Player.stop()">Stop</button>
    </p>
  </aside>
</main>
<script>

  /**
   * Some test GIB data
   */
  var gib = "\\ \[GAMEWHITENAME=Shesek (1D)\] \[GAMEBLACKNAME=to2915ny (1D)\] \[GAMERESULT=white 13.5 win\] \[GAMEZIPSU=135\] \[GAMEDUM=0\] \[GAMEGONGJE=65\] STO 0 2 1 3 3 STO 0 3 2 15 3 STO 0 4 1 3 15 STO 0 5 2 15 16 STO 0 6 1 13 2 STO 0 7 2 16 5 STO 0 8 1 15 1 STO 0 9 2 2 13 STO 0 10 1 2 11 STO 0 11 2 5 16 STO 0 12 1 3 13 STO 0 13 2 3 12 STO 0 14 1 2 12 STO 0 15 2 2 16 STO 0 16 1 2 14 STO 0 17 2 3 16 STO 0 18 1 4 15 STO 0 19 2 4 16 STO 0 20 1 16 7 STO 0 21 2 1 13 STO 0 22 1 1 14 STO 0 23 2 4 13 STO 0 24 1 3 14 STO 0 25 2 5 2 STO 0 26 1 7 2 STO 0 27 2 2 2 STO 0 28 1 5 3 STO 0 29 2 2 3 STO 0 30 1 4 2 STO 0 31 2 2 5 STO 0 32 1 3 4 STO 0 33 2 1 6 STO 0 34 1 13 4 STO 0 35 2 14 5 STO 0 36 1 16 10 STO 0 37 2 13 5 STO 0 38 1 12 5 STO 0 39 2 12 6 STO 0 40 1 11 5 STO 0 41 2 14 7 STO 0 42 1 17 6 STO 0 43 2 16 14 STO 0 44 1 17 13 STO 0 45 2 9 15 STO 0 46 1 11 6 STO 0 47 2 12 7 STO 0 48 1 11 7 STO 0 49 2 17 5 STO 0 50 1 12 8 STO 0 51 2 15 8 STO 0 52 1 16 8 STO 0 53 2 15 9 STO 0 54 1 15 10 STO 0 55 2 13 9 STO 0 56 1 13 8 STO 0 57 2 16 2 STO 0 58 1 16 1 STO 0 59 2 16 9 STO 0 60 1 17 9 STO 0 61 2 14 10 STO 0 62 1 15 11 STO 0 63 2 14 11 STO 0 64 1 11 9 STO 0 65 2 15 12 STO 0 66 1 17 11 STO 0 67 2 15 7 STO 0 68 1 16 6 STO 0 69 2 3 8 STO 0 70 1 15 6 STO 0 71 2 14 6 STO 0 72 1 4 6 STO 0 73 2 5 8 STO 0 74 1 6 7 STO 0 75 2 10 8 STO 0 76 1 11 8 STO 0 77 2 8 7 STO 0 78 1 7 8 STO 0 79 2 9 9 STO 0 80 1 8 8 STO 0 81 2 11 11 STO 0 82 1 9 8 STO 0 83 2 16 12 STO 0 84 1 17 12 STO 0 85 2 10 9 STO 0 86 1 10 7 STO 0 87 2 11 10 STO 0 88 1 8 10 STO 0 89 2 9 11 STO 0 90 1 7 12 STO 0 91 2 3 1 STO 0 92 1 4 1 STO 0 93 2 8 13 STO 0 94 1 7 13 STO 0 95 2 7 14 STO 0 96 1 6 14 STO 0 97 2 7 15 STO 0 98 1 4 9 STO 0 99 2 4 8 STO 0 100 1 3 10 STO 0 101 2 6 9 STO 0 102 1 6 10 STO 0 103 2 17 14 STO 0 104 1 16 13 STO 0 105 2 15 13 STO 0 106 1 18 14 STO 0 107 2 18 15 STO 0 108 1 18 13 STO 0 109 2 17 16 STO 0 110 1 1 16 STO 0 111 2 3 6 STO 0 112 1 4 5 STO 0 113 2 4 0 STO 0 114 1 5 0 STO 0 115 2 3 0 STO 0 116 1 5 1 STO 0 117 2 1 9 STO 0 118 1 2 9 STO 0 119 2 2 8 STO 0 120 1 1 10 STO 0 121 2 1 8 STO 0 122 1 5 9 STO 0 123 2 6 8 STO 0 124 1 7 9 STO 0 125 2 6 15 STO 0 126 1 5 15 STO 0 127 2 5 7 STO 0 128 1 5 6 STO 0 129 2 17 3 STO 0 130 1 14 4 STO 0 131 2 17 1 STO 0 132 1 15 5 STO 0 133 2 15 2 STO 0 134 1 14 2 STO 0 135 2 16 0 STO 0 136 1 14 1 STO 0 137 2 15 4 STO 0 138 1 13 7 STO 0 139 2 14 9 STO 0 140 1 13 6 STO 0 141 2 18 6 STO 0 142 1 18 7 STO 0 143 2 18 5 STO 0 144 1 18 8 STO 0 145 2 1 17 STO 0 146 1 1 15 STO 0 147 2 0 16 STO 0 148 1 8 12 STO 0 149 2 9 12 STO 0 150 1 9 10 STO 0 151 2 10 10 STO 0 152 1 8 11 STO 0 153 2 9 13 STO 0 154 1 15 0 STO 0 155 2 17 0 STO 0 156 1 3 2 STO 0 157 2 2 1 STO 0 158 1 2 4 STO 0 159 2 1 4 STO 0 160 1 3 7 STO 0 161 2 4 7 STO 0 162 1 3 5 STO 0 163 2 2 7 STO 0 164 1 0 15 STO 0 165 2 0 17 STO 0 166 1 12 9 STO 0 167 2 12 10 STO 0 168 1 14 3 STO 0 169 2 16 11 STO 0 170 1 17 10 STO 0 171 2 3 9 STO 0 172 1 2 10 STO 0 173 2 11 16 STO 0 174 1 0 9 STO 0 175 2 0 8 STO 0 176 1 0 10";

  /**
   * Module definition and dependencies
   */
  angular.module('ngGoDemo', [

    //ngGo player
    'ngGo.Player.Service',

    //ngGo player modes that you wish to enable
    'ngGo.Player.Mode.Edit.Service',
    'ngGo.Player.Mode.Replay.Service'
  ])

  /**
   * Configuration
   */
  .config(function(
    PlayerProvider, BoardProvider, BoardThemeProvider
  ) {

    //Player configuration
    PlayerProvider.setConfig({
      lastMoveMarker: 'circle',
      autoPlayDelay: 750
    });

    //Board configuration
    BoardProvider.setConfig({
      coordinates: true
    });

    //Board theme
    BoardThemeProvider.setTheme({
      coordinates: {
        vertical: {
          style: 'jgf',
          inverse: false
        },
        horizontal: {
          style: 'jgf',
          inverse: false
        }
      }
    });
  })

  /**
   * Controller
   */
  .controller('ngGoDemoController', function($scope, $http, Player, SetupTools, MarkupTools) {

    //Set the game in scope for easy access
    $scope.Game = Player.game;

    //Set setup tools and markup tools in scope
    $scope.SetupTools = SetupTools;
    $scope.MarkupTools = MarkupTools;

    //Load GIB data
    Player.load(gib);
  })

  /**
   * Stone color example filter
   */
  .filter('stoneColor', function(StoneColor) {
    return function(color) {
      if (color == StoneColor.B) {
        return 'Black';
      }
      else if (color == StoneColor.W) {
        return 'White';
      }
      else if (color == StoneColor.E) {
        return '';
      }
      return input;
    };
  });

  /**
   * Bootstrap angular
   */
  angular.element(document).ready(function() {
    setTimeout(function() {
      angular.bootstrap(document.getElementsByTagName('html')[0], ['ngGoDemo']);
    }, 10);
  });
</script>
</body>
</html>
